<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìˆ˜í•™ í€´ì¦ˆ</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      text-align: center;
      margin-top: 80px;
      font-size: 36px;
    }
    #korean {
      margin-top: 20px;
      font-size: 28px;
      color: #444;
    }
    button {
      font-size: 26px;
      padding: 10px 25px;
      margin-top: 30px;
      margin-right: 10px;
    }
  </style>
</head>
<body>

  <div id="question">ë¬¸ì œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
  <div id="korean"></div>
  <button onclick="generateQuestion()">ë‹¤ìŒ ë¬¸ì œ</button>
  <button onclick="speakKorean()">ğŸ”Š ì½ì–´ì£¼ê¸°</button>

  <script>
    function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    const numberToKorean = (num) => {
      const digits = ["", "ì¼", "ì´", "ì‚¼", "ì‚¬", "ì˜¤", "ìœ¡", "ì¹ ", "íŒ”", "êµ¬"];
      const units = ["", "ì‹­", "ë°±", "ì²œ", "ë§Œ"];
      if (num === 0) return "ì˜";
      let result = "";
      const str = num.toString();
      const len = str.length;
      for (let i = 0; i < len; i++) {
        const digit = parseInt(str[i]);
        const pos = len - i - 1;
        if (digit !== 0) {
          result += (digit === 1 && pos > 0 ? "" : digits[digit]) + units[pos];
        }
      }
      return result;
    };

    const opToKorean = {
      "+": "ë”í•˜ê¸°",
      "-": "ë¹¼ê¸°",
      "Ã—": "ê³±í•˜ê¸°",
      "Ã·": "ë‚˜ëˆ„ê¸°"
    };

    let currentKoreanText = "";

    function generateQuestion() {
      const type = getRandomInt(1, 4); // 1: +, 2: -, 3: Ã—, 4: Ã·
      let a, b, question = "", text = "", op = "";

      if (type === 1) {
        a = getRandomInt(0, 10000);
        b = getRandomInt(0, 10000);
        op = "+";
      } else if (type === 2) {
        a = getRandomInt(0, 10000);
        b = getRandomInt(0, a);
        op = "-";
      } else if (type === 3) {
        a = getRandomInt(1, 9);
        b = getRandomInt(1, 9);
        op = "Ã—";
      } else {
        b = getRandomInt(1, 9);
        const result = getRandomInt(1, 9);
        a = b * result;
        op = "Ã·";
      }

      // Dáº¡ng sá»‘
      question = `${a} ${op} ${b} = ?`;

      // Dáº¡ng HÃ n
      const koreanA = numberToKorean(a);
      const koreanB = numberToKorean(b);
      const koreanOp = opToKorean[op];
      text = `${koreanA} ${koreanOp} ${koreanB} ëŠ” ë¬´ì—‡ì…ë‹ˆê¹Œ?`;

      // Hiá»ƒn thá»‹
      document.getElementById("question").textContent = question;
      document.getElementById("korean").textContent = text;

      // LÆ°u Ä‘á»ƒ Ä‘á»c
      currentKoreanText = text;
    }

    function speakKorean() {
      const utterance = new SpeechSynthesisUtterance(currentKoreanText);
      utterance.lang = "ko-KR";

      // Náº¿u trÃ¬nh duyá»‡t há»— trá»£, chá»n giá»ng HÃ n
      const voices = speechSynthesis.getVoices();
      const koreanVoice = voices.find(voice => voice.lang === 'ko-KR');
      if (koreanVoice) {
        utterance.voice = koreanVoice;
      }

      speechSynthesis.speak(utterance);
    }

    // Khá»Ÿi táº¡o
    window.onload = () => {
      // Má»™t sá»‘ trÃ¬nh duyá»‡t cáº§n load voice trÆ°á»›c
      speechSynthesis.onvoiceschanged = () => {};
      generateQuestion();
    };
  </script>

</body>
</html>
